let $ = document, xm, ym, sw = false; addEventListener('mousemove', e => { xm = e.clientX || e.pageX; ym = e.clientY || e.pageY }); let c = $.createElement("div"), b = $.createElement("div"), p = $.body, a = Math.abs, h = "px", zx, zy, zdx, zdy, x, y, dx, dy, fn = () => { if (sw) return; requestAnimationFrame(fn); if (!zx || !zy) { zx = xm; zy = ym } else { zdx = (xm - zx) * 0.5; zdy = (ym - zy) * 0.5; if (a(zdx) + a(zdy) < 0.1) { zx = xm; zy = ym } else { zx += zdx; zy += zdy } } if (!x || !y) { x = xm; y = ym } else { dx = (xm - x) * 0.125; dy = (ym - y) * 0.125; if (a(dx) + a(dy) < 0.1) { x = xm; y = ym } else { x += dx; y += dy } } b.style.left = x + h; b.style.top = y + h; c.style.left = zx + h; c.style.top = zy + h }; c.id = "mouse"; b.id = "ball";
export default { followMouse: fn, mouse: c, ball: b, stopAnimate: () => sw = true, view: () => { p.appendChild(c); p.appendChild(b) }, remove: () => { p.removeChild(c); p.removeChild(b) } }